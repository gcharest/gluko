# Release v0.6: History Export & Import

## Release Summary

Enable users to export and import their meal calculation history as JSON files, providing backup capability and manual data transfer between devices or accounts.

## Goals

1. **Export history**: Users can download all their meal history as a portable JSON file
2. **Import history**: Users can restore history from previously exported files
3. **Data portability**: Users own their data and can move it between devices
4. **Backup capability**: Manual backup option for users concerned about losing data
5. **Format stability**: Export format documented and versioned for future compatibility

## Constraints Specific to This Release

- **No backend**: Export/import entirely local, no server involved
- **File handling**: Works in browser with FileReader/Blob APIs
- **Schema version**: Include schema version in export to handle future changes
- **Data privacy**: All data stays on user's device during export/import
- **Bilingual**: UI prompts in EN/FR

## Options Considered

### Option A: JSON export only (no import)

- **Approach**: Users can export, but can't re-import
- **Pros**: Simple, lower risk
- **Cons**: Backup is read-only, not truly portable
- **Risk**: Low but doesn't meet goals

### Option B: JSON export/import with versioning

- **Approach**: Export includes schema version; import parses and validates before loading
- **Pros**: Full data portability, handles future schema changes
- **Cons**: More complex validation logic
- **Risk**: Medium (validation must be robust)

### Option C: Cloud sync export

- **Approach**: Export to cloud service (Google Drive, OneDrive, etc.)
- **Pros**: Automatic backup, multi-device sync
- **Cons**: Requires backend/OAuth, conflicts with "no backend" constraint
- **Risk**: High (breaks architecture)

## Selected: Option B

**Why**: Gives users true portability and backup without requiring backend. Schema versioning allows graceful handling of future changes.

## Success Criteria

- [ ] Users can export all history as JSON file
- [ ] Export file includes schema version and export timestamp
- [ ] Users can import previously exported files
- [ ] Import validates schema version and structure
- [ ] Imported data merges correctly with existing history (no duplicates/conflicts)
- [ ] Clear UI feedback on export/import progress
- [ ] Error messages help users understand issues with import files
- [ ] Works with both large and small history files

## Known Risks

- **File corruption**: User edits exported JSON manually, breaks import → Validate structure strictly, show helpful error
- **Merge conflicts**: Import file has same meals as existing data → Detect duplicates, allow user to merge or replace
- **Large files**: History grows huge, export is slow → Show progress, allow async processing
- **Format changes**: Future releases change schema → Versioning handles migration

## Out of Scope

- Cloud sync or multi-device sync (future, requires backend)
- Encrypted export
- Partial export (export by subject/date range)
- CSV export (JSON only for now)

## Related Documentation

- **Previous release**: [v0.5-ui-polish.md](v0.5-ui-polish.md)
- **Release tracker**: [RELEASE_TRACKER.md](RELEASE_TRACKER.md)
- **Next release**: [v1.0-production-ready.md](v1.0-production-ready.md)
- Product goals: [PRODUCT.md](../PRODUCT.md)
- Architecture: [ARCHITECTURE.md](../ARCHITECTURE.md)
